│ Plan: Pixel SimCity AI Town — Complete Frontend Rebuild                                                                                                                                                │
│                                                                                                                                                                                                        │
│ Context                                                                                                                                                                                                │
│                                                                                                                                                                                                        │
│ The current /town/pixel (TownPixelRpg) and /town/pixel-iso (TownPixel) are prototype-quality — they render basic tiles and colored dots for agents but miss ~80% of features that Town3D has (no       │
│ economy, no degen mode, no chat, no relationships, no goals, no construction stages, no weather, no sound, no events feed). They look bad because they use programmatic Canvas2D drawing or mismatched │
│  Tiny Swords sprites with no personality.                                                                                                                                                              │
│                                                                                                                                                                                                        │
│ The user has a massive Modern Interiors pixel asset pack (52K+ sprites — characters with walk cycles, 27 themed interior tilesets, animated objects, UI elements) plus the existing Tiny Swords        │
│ outdoor tileset. The goal is to build a fully-featured pixel-art SimCity that matches Town3D's feature set while looking like a proper pixel RPG.                                                      │
│                                                                                                                                                                                                        │
│ Approach                                                                                                                                                                                               │
│                                                                                                                                                                                                        │
│ Replace TownPixelRpg.tsx with a modular, component-based pixel town using PixiJS v8 (already installed). Extract all game logic into composable hooks and small focused components rather than one     │
│ 4000-line monolith.                                                                                                                                                                                    │
│                                                                                                                                                                                                        │
│ Rendering tile size: 32x32 (Modern Interiors 16x16 at 2x nearest-neighbor, Tiny Swords 64x64 at 0.5x).                                                                                                 │
│                                                                                                                                                                                                        │
│ Reuse existing code: useDegenState.ts, sounds.ts, WalletConnect.tsx, all degen/ components, agents/types.ts (adapted for 2D).                                                                          │
│                                                                                                                                                                                                        │
│ Asset Pipeline                                                                                                                                                                                         │
│                                                                                                                                                                                                        │
│ Copy select sprites from /Users/axel/Desktop/rpg assets/ into app/public/pixel/:                                                                                                                       │
│                                                                                                                                                                                                        │
│ app/public/pixel/                                                                                                                                                                                      │
│   modern/                                                                                                                                                                                              │
│     characters/         ← 5 premade character spritesheets (1 per archetype)                                                                                                                           │
│     interiors/          ← Theme_Sorter/ tilesets per zone type                                                                                                                                         │
│     animated/           ← Key animated objects (doors, appliances)                                                                                                                                     │
│     ui/                 ← UI_16x16.png (speech bubbles, coins, hearts, status icons)                                                                                                                   │
│     room-builder/       ← Room_Builder_16x16.png (floors, walls)                                                                                                                                       │
│     home-designs/       ← Pre-built room layouts for interior view                                                                                                                                     │
│   tiny-swords/          ← Already exists (spritesheet.png, map.json)                                                                                                                                   │
│                                                                                                                                                                                                        │
│ Character → Archetype mapping (from moderninteriors-win/2_Characters/Old/Single_Characters_Legacy/):                                                                                                   │
│ - SHARK → Edward (sharp dresser) + sunglasses accessory                                                                                                                                                │
│ - ROCK → Bob (sturdy, casual) + hat accessory                                                                                                                                                          │
│ - CHAMELEON → Alex (adaptable look) + colorful outfit                                                                                                                                                  │
│ - DEGEN → Dan (wild style) + party hat accessory                                                                                                                                                       │
│ - GRINDER → Rob (worker look) + backpack accessory                                                                                                                                                     │
│                                                                                                                                                                                                        │
│ Each character has idle, idle_anim, run, sit, phone sprite variants with 4-direction walk cycles.                                                                                                      │
│                                                                                                                                                                                                        │
│ File Structure                                                                                                                                                                                         │
│                                                                                                                                                                                                        │
│ New files to create                                                                                                                                                                                    │
│                                                                                                                                                                                                        │
│ app/src/pixel/                          ← New module root                                                                                                                                              │
│ ├── types.ts                            ← 2D AgentSim, PlotData, TownData interfaces                                                                                                                   │
│ ├── constants.ts                        ← TILE_SIZE=32, zone colors, archetype configs                                                                                                                 │
│ ├── hooks/                                                                                                                                                                                             │
│ │   ├── useTownData.ts                  ← Centralized API polling (all 10+ endpoints)                                                                                                                  │
│ │   ├── usePixelCamera.ts               ← Pan/zoom/follow camera (port from TownPixelRpg)                                                                                                              │
│ │   ├── useAgentSim.ts                  ← Agent state machine + pathfinding (port from Town3D)                                                                                                         │
│ │   ├── useAssetLoader.ts               ← Texture loading with nearest-neighbor scaling                                                                                                                │
│ │   ├── useDayNight.ts                  ← Day/night tint cycle                                                                                                                                         │
│ │   └── useWeather.ts                   ← Rain/clear weather state                                                                                                                                     │
│ ├── rendering/                                                                                                                                                                                         │
│ │   ├── atlas.ts                        ← Spritesheet frame lookup helpers                                                                                                                             │
│ │   ├── spriteAnimator.ts              ← Walk cycle animation controller                                                                                                                               │
│ │   ├── characterGenerator.ts           ← Archetype → sprite mapping                                                                                                                                   │
│ │   └── tileRenderer.ts                ← Viewport-culled tile drawing                                                                                                                                  │
│ ├── components/                                                                                                                                                                                        │
│ │   ├── PixelStage.tsx                  ← PixiJS Application + viewport container                                                                                                                      │
│ │   ├── world/                                                                                                                                                                                         │
│ │   │   ├── TileMap.tsx                 ← Terrain tiles (Tiny Swords grass/sand/stone)                                                                                                                 │
│ │   │   ├── PlotGrid.tsx               ← Zone-colored plot overlays + selection                                                                                                                        │
│ │   │   ├── RoadNetwork.tsx             ← Road tiles connecting plots                                                                                                                                  │
│ │   │   ├── BuildingExterior.tsx        ← Per-zone building sprites + construction stages                                                                                                              │
│ │   │   └── Minimap.tsx                 ← Canvas minimap overlay                                                                                                                                       │
│ │   ├── agents/                                                                                                                                                                                        │
│ │   │   ├── PixelAgent.tsx              ← Animated character sprite + state                                                                                                                            │
│ │   │   ├── AgentOverlay.tsx            ← Activity icon + health bar + nameplate                                                                                                                       │
│ │   │   ├── SpeechBubble.tsx            ← Chat bubble above agent                                                                                                                                      │
│ │   │   └── RelationshipLines.tsx       ← Friend/rival connection lines                                                                                                                                │
│ │   ├── effects/                                                                                                                                                                                       │
│ │   │   ├── DayNightOverlay.tsx         ← Tinted fullscreen overlay                                                                                                                                    │
│ │   │   ├── WeatherParticles.tsx        ← Rain/snow particle system                                                                                                                                    │
│ │   │   ├── CoinBurst.tsx              ← Gold coin particle burst on trades                                                                                                                            │
│ │   │   ├── SpawnEffect.tsx            ← Sparkle on agent spawn                                                                                                                                        │
│ │   │   └── ProsperitySparkles.tsx     ← Golden ambient particles                                                                                                                                      │
│ │   └── ui/                                                                                                                                                                                            │
│ │       ├── PixelHud.tsx               ← Top bar: town info, price, wallet, controls                                                                                                                   │
│ │       ├── AgentSidebar.tsx           ← Right panel: agent list with stats                                                                                                                            │
│ │       ├── EventsFeed.tsx             ← Scrolling activity log overlay                                                                                                                                │
│ │       ├── PlotInspector.tsx          ← Click-building detail panel                                                                                                                                   │
│ │       ├── AgentInspector.tsx         ← Click-agent detail: goals, actions, relationships                                                                                                             │
│ │       └── InteriorViewer.tsx         ← Modal: building interior with themed tiles                                                                                                                    │
│ └── TownPixelSimCity.tsx               ← Main page assembling everything                                                                                                                               │
│                                                                                                                                                                                                        │
│ Files to modify                                                                                                                                                                                        │
│ ┌────────────────────────────────────┬─────────────────────────────────────────────────────────────────────┐                                                                                           │
│ │                File                │                               Change                                │                                                                                           │
│ ├────────────────────────────────────┼─────────────────────────────────────────────────────────────────────┤                                                                                           │
│ │ app/src/App.tsx                    │ Replace TownPixelRpg import → TownPixelSimCity on /town/pixel route │                                                                                           │
│ ├────────────────────────────────────┼─────────────────────────────────────────────────────────────────────┤                                                                                           │
│ │ app/src/components/agents/types.ts │ Add 2D position types (keep THREE types for Town3D compat)          │                                                                                           │
│ └────────────────────────────────────┴─────────────────────────────────────────────────────────────────────┘                                                                                           │
│ Files to reuse as-is                                                                                                                                                                                   │
│ ┌────────────────────────────────────────────────┬────────────────────────────────────────────────────┐                                                                                                │
│ │                      File                      │                        Why                         │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/hooks/useDegenState.ts                 │ Already polls all 9 degen endpoints perfectly      │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/utils/sounds.ts                        │ 14 procedural sounds, framework-agnostic           │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/WalletConnect.tsx           │ MetaMask connection works with any renderer        │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/DegenDashboard.tsx    │ Full degen sidebar — HTML-based, renderer-agnostic │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/SwapTicker.tsx        │ Marquee trade feed                                 │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/PriceChart.tsx        │ Recharts price chart                               │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/AgentBackingCard.tsx  │ Agent staking card                                 │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/BackerLeaderboard.tsx │ Leaderboard                                        │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/PositionTracker.tsx   │ Price + balance + PnL                              │                                                                                                │
│ ├────────────────────────────────────────────────┼────────────────────────────────────────────────────┤                                                                                                │
│ │ app/src/components/degen/AnimatedCounter.tsx   │ Spring animated numbers                            │                                                                                                │
│ └────────────────────────────────────────────────┴────────────────────────────────────────────────────┘                                                                                                │
│ Data Flow                                                                                                                                                                                              │
│                                                                                                                                                                                                        │
│ useTownData — centralized polling hub                                                                                                                                                                  │
│ ┌────────────────────────────────────┬──────────┬───────────────────────────────────────────────┐                                                                                                      │
│ │              Endpoint              │ Interval │                   Consumers                   │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/towns                  │ 12s      │ TownSelector in PixelHud                      │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/town/:id               │ 2.5s     │ TileMap, PlotGrid, BuildingExterior, Minimap  │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/agents                 │ 2.5s     │ PixelAgent[], AgentSidebar, Minimap           │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/economy/pool           │ 5s       │ PixelHud (price), DayNightOverlay (sentiment) │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/economy/swaps?limit=30 │ 5s       │ SwapTicker, CoinBurst triggers                │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/world/events?limit=50  │ 5s       │ EventsFeed, sound triggers                    │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/town/:id/events        │ 8s       │ EventsFeed                                    │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/town/:id/goals         │ 10s      │ AgentInspector                                │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/town/:id/relationships │ 10s      │ RelationshipLines, pathfinding                │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/town/:id/contributors  │ 15s      │ PlotInspector                                 │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/leaderboard            │ 15s      │ AgentSidebar                                  │                                                                                                      │
│ ├────────────────────────────────────┼──────────┼───────────────────────────────────────────────┤                                                                                                      │
│ │ GET /api/v1/agent-loop/status      │ 5s       │ PixelHud (loop indicator)                     │                                                                                                      │
│ └────────────────────────────────────┴──────────┴───────────────────────────────────────────────┘                                                                                                      │
│ On-demand fetches                                                                                                                                                                                      │
│ ┌─────────────────┬───────────────────────────────┬────────────────────────────────────┐                                                                                                               │
│ │     Trigger     │           Endpoint            │              Consumer              │                                                                                                               │
│ ├─────────────────┼───────────────────────────────┼────────────────────────────────────┤                                                                                                               │
│ │ Click agent     │ GET /agent/:id/actions        │ AgentInspector                     │                                                                                                               │
│ ├─────────────────┼───────────────────────────────┼────────────────────────────────────┤                                                                                                               │
│ │ Click building  │ GET /x402/building/:plot/lore │ InteriorViewer                     │                                                                                                               │
│ ├─────────────────┼───────────────────────────────┼────────────────────────────────────┤                                                                                                               │
│ │ Agent proximity │ POST /town/:id/chat           │ SpeechBubble                       │                                                                                                               │
│ ├─────────────────┼───────────────────────────────┼────────────────────────────────────┤                                                                                                               │
│ │ Degen actions   │ All /degen/*                  │ DegenDashboard (via useDegenState) │                                                                                                               │
│ └─────────────────┴───────────────────────────────┴────────────────────────────────────┘                                                                                                               │
│ Rendering Approach                                                                                                                                                                                     │
│                                                                                                                                                                                                        │
│ Town Map (TileMap + PlotGrid + RoadNetwork)                                                                                                                                                            │
│                                                                                                                                                                                                        │
│ - Grid: Town level 1 = 5x5 plots, level 2+ = 4x4 plots. Each plot = 3x3 tiles (96x96px at 32px/tile). Total map ~19x19 tiles with 2-tile margin.                                                       │
│ - Terrain: Tiny Swords grass/sand tiles. Zone-seeded variety (INDUSTRIAL = stone/sand, RESIDENTIAL = green grass, ENTERTAINMENT = mixed).                                                              │
│ - Roads: Dark tile strips between plots. Ring road around perimeter + arterials from seeded RNG.                                                                                                       │
│ - Zone overlay: Semi-transparent colored rectangles per zone (same 5 colors as Town3D).                                                                                                                │
│                                                                                                                                                                                                        │
│ Buildings (BuildingExterior)                                                                                                                                                                           │
│                                                                                                                                                                                                        │
│ - EMPTY: Bare terrain tile, faint zone tint                                                                                                                                                            │
│ - CLAIMED: Zone-tinted tile + small flag sprite (archetype-colored)                                                                                                                                    │
│ - UNDER_CONSTRUCTION: Scaffold sprite + progress bar (workDone/workNeeded ratio). 4 visual stages: foundation → frame → walls → finishing.                                                             │
│ - BUILT: Full building sprite from Modern Interiors Home Designs (zone-matched). RESIDENTIAL = house preview, COMMERCIAL = shop preview, CIVIC = public building, INDUSTRIAL = factory, ENTERTAINMENT  │
│ = party room.                                                                                                                                                                                          │
│                                                                                                                                                                                                        │
│ Agents (PixelAgent)                                                                                                                                                                                    │
│                                                                                                                                                                                                        │
│ - Sprite: Modern Interiors premade character (mapped by archetype). 4-direction walk animation, idle animation.                                                                                        │
│ - State machine (ported from Town3D):                                                                                                                                                                  │
│   - WALKING → walk cycle animation, move toward target (road nodes, plots, buildings, friends)                                                                                                         │
│   - IDLE → idle animation, occasional head turn                                                                                                                                                        │
│   - BUILDING → face plot, small hammer icon overlay                                                                                                                                                    │
│   - MINING → face plot, pickaxe icon overlay                                                                                                                                                           │
│   - CHATTING → face partner, speech bubble shown                                                                                                                                                       │
│   - PLAYING → near arena building, game controller icon                                                                                                                                                │
│   - SHOPPING → near commercial building, bag icon                                                                                                                                                      │
│   - SCHEMING → hunched sprite variant, eye icon                                                                                                                                                        │
│   - BEGGING → sway animation, coin icon                                                                                                                                                                │
│   - DEAD → gray tint, flat sprite                                                                                                                                                                      │
│ - Indicators above head: Activity icon (from UI sprites), health bar (PixiJS Graphics), nameplate (BitmapText)                                                                                         │
│ - Economic visual: Opacity/brightness dims as bankroll drops. Thriving = golden glow ring. Dead = grayscale.                                                                                           │
│ - Pathfinding: Relationship-aware — 15% chance walk toward friend/rival, 25% toward own building, 60% random road node.                                                                                │
│                                                                                                                                                                                                        │
│ Effects                                                                                                                                                                                                │
│                                                                                                                                                                                                        │
│ - Day/night: Container-level tint cycling (warm yellow → amber → deep blue → dawn pink). 5-minute cycle.                                                                                               │
│ - Rain: 200 particle sprites falling when industrial pollution ratio > 0.4. PixiJS ParticleContainer.                                                                                                  │
│ - Prosperity sparkles: Golden star sprites floating up when town completion > 70%.                                                                                                                     │
│ - Coin burst: 8 coin sprites radiate outward on swap events. Triggered by new entries in swaps feed.                                                                                                   │
│ - Spawn effect: Ring of white sprites expanding on new agent detection.                                                                                                                                │
│ - Smog: Semi-transparent dark overlay, opacity = industrial zone ratio * 0.3.                                                                                                                          │
│                                                                                                                                                                                                        │
│ UI Panels (HTML overlays on top of PixiJS canvas)                                                                                                                                                      │
│                                                                                                                                                                                                        │
│ - PixelHud (top): Town name + level, completion %, agents count, $ARENA price, loop status indicator, sound toggle, wallet connect. Pixel-art border styling via CSS.                                  │
│ - AgentSidebar (right): Scrollable agent list with archetype emoji, name, ELO, balance, activity badge. Click to select + camera follow.                                                               │
│ - EventsFeed (bottom-left): Scrolling activity log. Event type icons (build, trade, match, chat). Timestamps. Auto-scroll with pause on hover.                                                         │
│ - PlotInspector (popup on click): Building name, zone, owner, description, construction progress, yield contribution. "View Interior" button for built buildings.                                      │
│ - AgentInspector (popup on click): Full agent profile — archetype, ELO, win/loss, bankroll, current goal + progress bar, recent actions, relationships (friends/rivals with scores), economic state.   │
│ - InteriorViewer (modal): Shows building interior using Modern Interiors themed tileset. Room layout from Home Designs. Building lore text from x402 API. Close button.                                │
│ - DegenPanel (right sidebar, togglable): Reuses existing DegenDashboard with pixel-themed CSS wrapper. Price chart, agent backing, predictions, leaderboard.                                           │
│ - SwapTicker (bottom marquee): Reuses existing SwapTicker component.                                                                                                                                   │
│ - Minimap (bottom-left corner): Canvas overlay showing plot grid + agent dots + camera viewport rectangle. Click to jump.                                                                              │
│                                                                                                                                                                                                        │
│ Component Assembly (TownPixelSimCity.tsx)                                                                                                                                                              │
│                                                                                                                                                                                                        │
│ TownPixelSimCity                                                                                                                                                                                       │
│ ├── PixelHud                        (fixed top)                                                                                                                                                        │
│ │   ├── TownSelector                                                                                                                                                                                   │
│ │   ├── PositionTracker                                                                                                                                                                                │
│ │   ├── WalletConnect                                                                                                                                                                                  │
│ │   └── SoundToggle                                                                                                                                                                                    │
│ ├── ResizablePanelGroup             (main layout)                                                                                                                                                      │
│ │   ├── ResizablePanel              (game viewport)                                                                                                                                                    │
│ │   │   ├── PixelStage              (PixiJS canvas)                                                                                                                                                    │
│ │   │   │   ├── TileMap                                                                                                                                                                                │
│ │   │   │   ├── RoadNetwork                                                                                                                                                                            │
│ │   │   │   ├── PlotGrid                                                                                                                                                                               │
│ │   │   │   ├── BuildingExterior[]                                                                                                                                                                     │
│ │   │   │   ├── PixelAgent[]                                                                                                                                                                           │
│ │   │   │   │   ├── AgentOverlay                                                                                                                                                                       │
│ │   │   │   │   └── SpeechBubble                                                                                                                                                                       │
│ │   │   │   ├── RelationshipLines                                                                                                                                                                      │
│ │   │   │   ├── DayNightOverlay                                                                                                                                                                        │
│ │   │   │   ├── WeatherParticles                                                                                                                                                                       │
│ │   │   │   ├── CoinBurst[]                                                                                                                                                                            │
│ │   │   │   ├── SpawnEffect[]                                                                                                                                                                          │
│ │   │   │   └── ProsperitySparkles                                                                                                                                                                     │
│ │   │   ├── Minimap                 (canvas overlay)                                                                                                                                                   │
│ │   │   ├── EventsFeed              (HTML overlay)                                                                                                                                                     │
│ │   │   ├── PlotInspector           (HTML popup)                                                                                                                                                       │
│ │   │   └── AgentInspector          (HTML popup)                                                                                                                                                       │
│ │   ├── ResizableHandle                                                                                                                                                                                │
│ │   └── ResizablePanel              (degen sidebar)                                                                                                                                                    │
│ │       └── DegenDashboard          (reused)                                                                                                                                                           │
│ ├── SwapTicker                      (fixed bottom)                                                                                                                                                     │
│ └── InteriorViewer                  (modal)                                                                                                                                                            │
│                                                                                                                                                                                                        │
│ Implementation Order                                                                                                                                                                                   │
│                                                                                                                                                                                                        │
│ Phase 1: Foundation — Map + Buildings + Basic Agents                                                                                                                                                   │
│                                                                                                                                                                                                        │
│ 1. Copy assets from rpg assets dir → app/public/pixel/modern/                                                                                                                                          │
│ 2. Create pixel/types.ts — 2D interfaces (no THREE.js dependency)                                                                                                                                      │
│ 3. Create pixel/constants.ts — tile size, zone colors, archetype configs                                                                                                                               │
│ 4. Create pixel/rendering/atlas.ts — spritesheet frame helpers                                                                                                                                         │
│ 5. Create pixel/hooks/useAssetLoader.ts — load character spritesheets + terrain                                                                                                                        │
│ 6. Create pixel/hooks/useTownData.ts — centralized API polling                                                                                                                                         │
│ 7. Create pixel/hooks/usePixelCamera.ts — port camera from TownPixelRpg                                                                                                                                │
│ 8. Create pixel/components/PixelStage.tsx — PixiJS Application wrapper                                                                                                                                 │
│ 9. Create pixel/components/world/TileMap.tsx — terrain rendering                                                                                                                                       │
│ 10. Create pixel/components/world/PlotGrid.tsx — zone overlays                                                                                                                                         │
│ 11. Create pixel/components/world/BuildingExterior.tsx — building sprites by zone/status                                                                                                               │
│ 12. Create pixel/rendering/characterGenerator.ts — archetype → character mapping                                                                                                                       │
│ 13. Create pixel/rendering/spriteAnimator.ts — walk cycle controller                                                                                                                                   │
│ 14. Create pixel/hooks/useAgentSim.ts — agent state machine                                                                                                                                            │
│ 15. Create pixel/components/agents/PixelAgent.tsx — animated characters                                                                                                                                │
│ 16. Create pixel/TownPixelSimCity.tsx — page shell assembling Phase 1 components                                                                                                                       │
│ 17. Modify App.tsx — wire route                                                                                                                                                                        │
│                                                                                                                                                                                                        │
│ Checkpoint: Pixel map with zone-colored plots, building sprites, and animated agents walking around.                                                                                                   │
│                                                                                                                                                                                                        │
│ Phase 2: UI Panels + Interaction                                                                                                                                                                       │
│                                                                                                                                                                                                        │
│ 18. Create pixel/components/ui/PixelHud.tsx — top bar                                                                                                                                                  │
│ 19. Create pixel/components/ui/AgentSidebar.tsx — agent list                                                                                                                                           │
│ 20. Create pixel/components/ui/EventsFeed.tsx — activity log                                                                                                                                           │
│ 21. Create pixel/components/ui/PlotInspector.tsx — building details on click                                                                                                                           │
│ 22. Create pixel/components/ui/AgentInspector.tsx — agent details on click                                                                                                                             │
│ 23. Create pixel/components/world/Minimap.tsx — minimap                                                                                                                                                │
│ 24. Create pixel/components/agents/AgentOverlay.tsx — icons + health bar                                                                                                                               │
│ 25. Create pixel/components/agents/SpeechBubble.tsx — chat bubbles                                                                                                                                     │
│ 26. Create pixel/components/agents/RelationshipLines.tsx — friend/rival lines                                                                                                                          │
│                                                                                                                                                                                                        │
│ Checkpoint: Full interactive UI with clickable agents/buildings, inspectors, events, minimap.                                                                                                          │
│                                                                                                                                                                                                        │
│ Phase 3: Effects + Atmosphere + Economy                                                                                                                                                                │
│                                                                                                                                                                                                        │
│ 27. Create pixel/hooks/useDayNight.ts — time cycle                                                                                                                                                     │
│ 28. Create pixel/hooks/useWeather.ts — weather state                                                                                                                                                   │
│ 29. Create pixel/components/effects/DayNightOverlay.tsx                                                                                                                                                │
│ 30. Create pixel/components/effects/WeatherParticles.tsx                                                                                                                                               │
│ 31. Create pixel/components/effects/CoinBurst.tsx                                                                                                                                                      │
│ 32. Create pixel/components/effects/SpawnEffect.tsx                                                                                                                                                    │
│ 33. Create pixel/components/effects/ProsperitySparkles.tsx                                                                                                                                             │
│ 34. Create pixel/components/world/RoadNetwork.tsx — road tiles                                                                                                                                         │
│ 35. Integrate sounds.ts triggers into useTownData event handlers                                                                                                                                       │
│ 36. Create pixel/components/ui/DegenPanel.tsx — wrap existing DegenDashboard                                                                                                                           │
│ 37. Wire SwapTicker into page layout                                                                                                                                                                   │
│ 38. Create pixel/components/ui/InteriorViewer.tsx — building interior modal                                                                                                                            │
│                                                                                                                                                                                                        │
│ Checkpoint: Full feature parity with Town3D in pixel art form.                                                                                                                                         │
│                                                                                                                                                                                                        │
│ Key Existing Code to Port From                                                                                                                                                                         │
│ ┌──────────────────────────┬───────────────────────────────────────────────────────────────┐                                                                                                           │
│ │          Source          │                        What to Extract                        │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ Town3D.tsx:120-280       │ Agent state machine logic (activity transitions, pathfinding) │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ Town3D.tsx:300-450       │ Road network generation algorithm                             │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ Town3D.tsx:500-700       │ API polling setup (intervals, endpoints, error handling)      │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ Town3D.tsx:1200-1500     │ Event-to-sound trigger mapping                                │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ Town3D.tsx:2800-4200     │ UI panel JSX (sidebar, HUD, inspectors)                       │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ TownPixelRpg.tsx:50-150  │ PixiJS camera pan/zoom/follow                                 │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ TownPixelRpg.tsx:200-400 │ Tile grid generation with terrain variety                     │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ TownPixelRpg.tsx:600-800 │ Minimap canvas drawing                                        │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ agents/types.ts          │ AgentActivity, AgentEconomicState, getEconomicState           │                                                                                                           │
│ ├──────────────────────────┼───────────────────────────────────────────────────────────────┤                                                                                                           │
│ │ agents/agentVisuals.ts   │ ARCHETYPE_BODY configs (speeds, colors)                       │                                                                                                           │
│ └──────────────────────────┴───────────────────────────────────────────────────────────────┘                                                                                                           │
│ Verification Plan                                                                                                                                                                                      │
│                                                                                                                                                                                                        │
│ 1. Start backend: cd backend && FAST_STARTUP=true npx tsx src/index.ts                                                                                                                                 │
│ 2. Start frontend: cd app && npm run dev                                                                                                                                                               │
│ 3. Navigate to http://localhost:8080/town/pixel                                                                                                                                                        │
│ 4. Verify map: Terrain tiles render, plots show with zone colors, buildings display as sprites                                                                                                         │
│ 5. Verify agents: Characters walk with animation, show archetype-specific sprites, display state indicators                                                                                            │
│ 6. Verify interaction: Click agent → inspector shows stats/goals/actions. Click building → inspector shows details. Camera follows on agent click.                                                     │
│ 7. Verify economy: Top bar shows $ARENA price. SwapTicker scrolls trades. Degen sidebar shows staking/predictions.                                                                                     │
│ 8. Verify effects: Day/night tint cycles. Rain appears. Coin bursts on trades. Sparkles on prosperity.                                                                                                 │
│ 9. Verify sound: Build completion, trades, town events trigger procedural sounds.                                                                                                                      │
│ 10. Verify events feed: Activity log scrolls with new events. Icons match event types.                                                                                                                 │
│ 11. Verify minimap: Shows plots + agents. Click jumps camera. Viewport rectangle updates on pan/zoom.                                                                                                  │
│ 12. Verify interior: Click built building → "View Interior" → modal shows themed room.                                                                                                                 │
│ 13. Build check: cd app && npm run build — no TypeScript errors. 